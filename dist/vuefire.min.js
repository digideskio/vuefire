!function(e,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define([],i):"object"==typeof exports?exports.VueFire=i():e.VueFire=i()}(this,function(){return function(e){function i(r){if(n[r])return n[r].exports;var t=n[r]={exports:{},id:r,loaded:!1};return e[r].call(t.exports,t,t.exports,i),t.loaded=!0,t.exports}var n={};return i.m=e,i.c=n,i.p="",i(0)}([function(e,i){function n(e){return"[object Object]"===Object.prototype.toString.call(e)}function r(e){var i=e.val(),r=n(i)?i:{".value":i};return r[".key"]=o(e),r}function t(e,i){for(var n=0;n<e.length;n++)if(e[n][".key"]===i)return n;return-1}function o(e){var i;return i="function"==typeof e.key?e.key():"string"==typeof e.key||"object"==typeof e.key?e.key:e.name()}function s(e){var i;return i="function"==typeof e.ref?e.ref():e.ref}function f(e,i,r){var t=!1,o=null;if(n(r)&&r.hasOwnProperty("source")&&(t=r.asObject,o=r.cancelCallback,r=r.source),!n(r))throw new Error("VueFire: invalid Firebase binding source.");var f=r;"function"==typeof r.ref&&(f=s(r)),e.$firebaseRefs[i]=f,e._firebaseSources[i]=r,t?a(e,i,r,o):c(e,i,r,o)}function c(e,i,n,s){var f=[];d.util.defineReactive(e,i,f);var c=n.on("child_added",function(e,i){var n=i?t(f,i)+1:0;f.splice(n,0,r(e))},s),a=n.on("child_removed",function(e){var i=t(f,o(e));f.splice(i,1)},s),u=n.on("child_changed",function(e){var i=t(f,o(e));f.splice(i,1,r(e))},s),l=n.on("child_moved",function(e,i){var n=t(f,o(e)),r=f.splice(n,1)[0],s=i?t(f,i)+1:0;f.splice(s,0,r)},s);e._firebaseListeners[i]={child_added:c,child_removed:a,child_changed:u,child_moved:l}}function a(e,i,n,t){d.util.defineReactive(e,i,{});var o=n.on("value",function(n){e[i]=r(n)},t);e._firebaseListeners[i]={value:o}}function u(e,i){var n=e._firebaseSources&&e._firebaseSources[i];if(!n)throw new Error('VueFire: unbind failed: "'+i+'" is not bound to a Firebase reference.');var r=e._firebaseListeners[i];for(var t in r)n.off(t,r[t]);e[i]=null,e.$firebaseRefs[i]=null,e._firebaseSources[i]=null,e._firebaseListeners[i]=null}function l(e){e.$firebaseRefs||(e.$firebaseRefs=Object.create(null),e._firebaseSources=Object.create(null),e._firebaseListeners=Object.create(null))}function b(e){d=e,d.mixin(p);var i=d.config.optionMergeStrategies;i.firebase=i.methods,d.prototype.$bindAsObject=function(e,i,n){l(this),f(this,e,{source:i,asObject:!0,cancelCallback:n})},d.prototype.$bindAsArray=function(e,i,n){l(this),f(this,e,{source:i,cancelCallback:n})},d.prototype.$unbind=function(e){u(this,e)}}var d,p={init:function(){var e=this.$options.firebase;if(e){l(this);for(var i in e)f(this,i,e[i])}},beforeDestroy:function(){if(this.$firebaseRefs){for(var e in this.$firebaseRefs)this.$firebaseRefs[e]&&this.$unbind(e);this.$firebaseRefs=null,this._firebaseSources=null,this._firebaseListeners=null}}};"undefined"!=typeof window&&window.Vue&&b(window.Vue),e.exports=b}])});